<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
		<meta name="renderer" content="webkit" />
		<style type="text/css">
			.border-table {   
		        border-collapse: collapse;   
		        border: none;   
		    }   
		    .border-table td {   
		        border: solid #000 1px; 
		        text-align:center;  
		    }
		    ul{
		    	list-style-type:none;
		    	margin:0;width:100%; 
		    } 
			ul li{ 
				width:40px; 
				float:left;
				border: solid 1px blue;
			} 
		</style>
		<link rel="stylesheet" href="../js/bootstrap.min.css" >
		<script type="text/javascript" src="../js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<script type="text/javascript">
			var pageLen  = 30;
			var title_str =
			"<thead><tr style='background-color:#81C0C0;'>" +
			  "<th>&nbsp;会员账号&nbsp;</th>"+
			  "<th>&nbsp;昵&nbsp;&nbsp;&nbsp;称&nbsp;</th>"+
			  "<th>&nbsp;头&nbsp;&nbsp;&nbsp;衔&nbsp;</th>"+
			  "<th>&nbsp;身&nbsp;份&nbsp;证&nbsp;</th>"+
			  "<th>&nbsp;注册时间</th>"+
			  "<th>&nbsp;买家权限&nbsp;</th>"+
			  "<th>&nbsp;卖家权限&nbsp;</th>"+
			  "<th>&nbsp;总成交额&nbsp;</th>"+
			  "<th>&nbsp;好评次数&nbsp;</th>"+
			  "<th>&nbsp;中评次数&nbsp;</th>"+
			  "<th>&nbsp;差评次数&nbsp;</th>"+
			  "<th>&nbsp;违约记录&nbsp;</th>"+
			  "<th>&nbsp;封号记录&nbsp;</th>"+
			 "</tr></thead>";
			 
			function openFrame(){
			   
			};
			
			function insert(container,data){
			    var buyFlag  = false;
			    var sellFlag = false;
			    if (data.perission.type == "seller"){
			    	sellFlag = true;
			    	buyFlag = true;
			    }else if (data.perission.type == "buyer"){
			    	sellFlag = false;
			    	buyFlag = true;
			    }
			    var identity = (data.identity == undefined || data.identity== "") ? "无" : data.identity;
			    var forbid  = data.forbid.reason == undefined ? "无" : data.forbid.reason;
				var html = "<tr id='" + data + "'>" +
							   "<td><a href='#' onclick='openFrame(" + data.id + ");return false;'>" + data.account + "</a></td>" +
							   "<td>" + data.nikeName + "</td>" +
							   "<td>" + data.title + "</td>" +
							   "<td>" + identity + "</td>" +
								"<td>" + data.registTime + "</td>" +
								"<td>" + buyFlag + "</td>" +
								"<td>" + sellFlag + "</td>" +
								"<td>" + data.completeDealNum + "</td>" +
								"<td>" + data.credit.hp + "</td>" +
								"<td>" + data.credit.zp + "</td>" +
								"<td>" + data.credit.cp + "</td>" +
								"<td>" + data.breach + "</td>" +
								"<td>" + forbid + "</td>" +
						    "</tr>";
				container.append(html);
				init_ul(data);
			};
			
			function go_page(index){
			    var params = "page=" + index + "&num=" + pageLen;
				$.ajax({
				    type:"get",
			        url :"../gm/HttpUserList",
			        data:params,
			        contentType:"application/json; charset=utf-8",
			        dataType:"json",
			        success:function(data) {
			        	if (data.result == "ok"){
			        		var container = $("#container");
							container.empty();
							container.append(title_str);
							for (var i = 0 ; i < pageLen ; i++){
								insert(container,data.list[i]);
							}
							init_ul(data);
			        	}else{
			        		alert(data.result);
			        	}
			        },
			        error:function (msg) {
		                alert(msg);
		            }
				});
			};
			
			function init_ul(data){
				var page_li='';
				var ge = new Array();
				ge[1]=parseInt(data.page);
				ge[2]=1;
				ge[3]=parseInt(data.left);
				ge[4]=ge[1]+10;
				if (ge[1]-4 > 0) {
					ge[2]=ge[1]-4;
					ge[4]=ge[4]-4;
				};
				for (var i = ge[2]; i < ge[4]; i++) {
					var cs="";
					if (i == ge[1]) {
						cs="class=\"active\"";
					}
					if ( i > (Number(ge[1])+Number(ge[3]))){
						break;
					};
					var page_li = page_li+"<li "+cs+" ><a href='#' onclick=\"go_page("+i+");return false;\">"+i+"</a></li>";
				};
				var page_ul = "<ul><li><a href='#'  onclick=\"go_page(1);return false;\">&laquo;</a></li>"+page_li+"<li><a href='#' onclick=\"go_page("+(Number(ge[1])+Number(ge[3]))+");return false;\">&raquo;</a></li> </ul>";
				$("#cols").empty();
				$("#cols").html(page_ul);
			};
			$(document).ready(function(){
				go_page(1);
			});
		</script>
	</head>
	<body style="margin-left:20%;">
		<table id="container" class="border-table">
			
		</table>
		<br>
		<center>
			<div id="cols">
				
			</div>
		</center>
	</body>
</html>